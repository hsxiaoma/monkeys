#!/usr/local/bin/node --harmony

var package = require('../package.json')
var program = require('commander');
var main = require('../index');
var build = require('../build');
var scaffold = require('../scaffold/scaffold');
var install = require('../install/index');

program
	.version(package.version)
	.option('-p, --port [number]', 'define port for node', 80) // 声明端口
	.option('-s, --stage' , 'stage env for build')
	.option('-P, --product' , 'product env for build')
	.option('-cm, --cssize [number]' , 'define width of UI to deal px to rem')

// 子命令: 初始化项目
program
	.command('init')
	.description('scraffold for h5 project')
	.action(function() {
		scaffold.main()
	});

// 子命令:启动本地web服务
program
	.command('start')
	.description('run web service')
	.action(function() {
		main(program.port , program.cssize);
	});

// 子命令:打包服务
program
	.command('build')
	.description('build project')
	.action(function () {
		build.main({
			stage : program.stage,
			product : program.product,
			cssize : program.cssize
		});
	});

// 子命令:打包服务
program
	.command('install <name>')
	.description('intall h5-widget')
	.action(function (name) {
		install.start(name);
	});
	
program.parse(process.argv);




